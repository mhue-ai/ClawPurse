"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.fixUint8Array = fixUint8Array;
// See https://stackoverflow.com/q/79803845/2013738 for why this is needed
function isUint8ArrayOfArrayBuffer(source) {
    return source.buffer instanceof ArrayBuffer;
}
/**
 * Safely converts a Uint8Array<T> or Uint8Array into a
 * Uint8Array<ArrayBuffer>, often without a copy at runtime.
 *
 * @see https://github.com/paulmillr/scure-base/issues/53
 */
function fixUint8Array(source) {
    if (isUint8ArrayOfArrayBuffer(source))
        return source;
    const copy = new ArrayBuffer(source.byteLength); // allocate memory
    const out = new Uint8Array(copy);
    out.set(source); // copy data
    return out;
}
//# sourceMappingURL=uint8array.js.map