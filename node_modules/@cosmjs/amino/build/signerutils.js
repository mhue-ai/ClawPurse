"use strict";
/**
 * Utility functions for working with signer accounts and algorithm detection.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.isEthereumSecp256k1Account = isEthereumSecp256k1Account;
exports.getAminoPubkey = getAminoPubkey;
const encoding_1 = require("./encoding");
/**
 * Checks if an account uses Ethereum secp256k1 keys by examining the algorithm name.
 *
 * Handle Ethereum secp256k1 keys with dual naming convention support:
 * Different wallets and chains report Ethereum key algorithms inconsistently:
 * - "eth_secp256k1" (with underscore) - de facto standard used by Keplr wallet, CosmJS, some Cosmos SDK chains
 * - "ethsecp256k1" (without underscore) - used by Evmos, Cronos, and other EVM-compatible chains
 * Both represent the same Ethereum-compatible secp256k1 keys that require keccak256 address derivation
 *
 * @param account The account data from a signer
 * @returns true if the account uses Ethereum secp256k1 keys, false otherwise
 */
function isEthereumSecp256k1Account(account) {
    return account.algo === "eth_secp256k1" || account.algo === "ethsecp256k1";
}
/**
 * Gets the correctly encoded amino pubkey for an account based on its algorithm.
 *
 * This utility automatically selects the appropriate encoding function based on whether
 * the account uses Ethereum secp256k1 keys or standard secp256k1 keys.
 *
 * @param account The account data from a signer
 * @returns The amino-encoded pubkey (EthSecp256k1Pubkey or Secp256k1Pubkey)
 */
function getAminoPubkey(account) {
    if (isEthereumSecp256k1Account(account)) {
        return (0, encoding_1.encodeEthSecp256k1Pubkey)(account.pubkey);
    }
    else {
        return (0, encoding_1.encodeSecp256k1Pubkey)(account.pubkey);
    }
}
//# sourceMappingURL=signerutils.js.map